<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<form id="form" method="post">
    <table>
        <tr>
            <td>Login: </td><td><input id="login" type="text" name="login"></td>
        </tr>
        <tr>
            <td>Password: </td><td><input id="password" type="password" name="password"></td>
        </tr>
        <tr>
            <td><input type="submit" value="login"></td>
            <form action="register" method="get">
                <td><a href="register">Registration</a></td>
            </form>
        </tr>

    </table>
</form>
<script>
    /*
    HTTP1.1
    METHOD: POST
    CONTENT-TYPE: application/json
    ===================
    {"login":,"password":}*/

    var form = document.getElementById('form')

    form.addEventListener('submit', function (e) {

        e.preventDefault()

        var login = document.getElementById('login').value
        var password = document.getElementById('password').value

        fetch('login', {
            method: 'POST',
            body: JSON.stringify({
                login: login,
                password: password
            }),
            headers: {
                'Content-Type': 'application/json; charset=UTF-8'
            }
        })
            .then(function (response) {
                if (response.status === 200) {
                    window.location.replace('welcome');
                }
                else if(response.status === 400) {
                    // var json = JSON.parse(JSON.stringify(response.json()));
                    // var w = window.open();
                    // var html = "<head><style>pre {outline: 1px solid #ccc; padding: 5px; margin: 5px; } .string { color: green; } ";
                    // html+= " .number { color: darkorange; } .boolean { color: blue; } .null { color: magenta; } .key { color: red; }</style></head><body>";
                    // html+= "<pre>"+json+"</pre></body>";
                    // w.document.writeln(html);
                    console.log(response.json());
                }
            })
    })

</script>
</body>
</html>